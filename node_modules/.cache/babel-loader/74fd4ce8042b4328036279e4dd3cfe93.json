{"remainingRequest":"/Users/liuxiang/Desktop/typescript-vue-demo/node_modules/thread-loader/dist/cjs.js!/Users/liuxiang/Desktop/typescript-vue-demo/node_modules/babel-loader/lib/index.js!/Users/liuxiang/Desktop/typescript-vue-demo/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/liuxiang/Desktop/typescript-vue-demo/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/liuxiang/Desktop/typescript-vue-demo/src/views/other/login.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/liuxiang/Desktop/typescript-vue-demo/src/views/other/login.vue","mtime":1559813774447},{"path":"/Users/liuxiang/Desktop/typescript-vue-demo/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/liuxiang/Desktop/typescript-vue-demo/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/liuxiang/Desktop/typescript-vue-demo/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/liuxiang/Desktop/typescript-vue-demo/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/liuxiang/Desktop/typescript-vue-demo/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import _inheritsLoose from \"/Users/liuxiang/Desktop/typescript-vue-demo/node_modules/@babel/runtime-corejs2/helpers/esm/inheritsLoose\";\n\nvar _dec, _class, _temp;\n\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport { Vue, Component } from 'vue-property-decorator';\nimport TopNav from \"./TopNav\";\nvar LoginNav = (_dec = Component({\n  components: {\n    TopNav: TopNav\n  }\n}), _dec(_class = (_temp =\n/*#__PURE__*/\nfunction (_Vue) {\n  _inheritsLoose(LoginNav, _Vue);\n\n  function LoginNav() {\n    var _this;\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _Vue.call.apply(_Vue, [this].concat(args)) || this;\n    _this.userForm = {\n      email: '',\n      password: ''\n    };\n    _this.registerForm = {\n      email: '',\n      name: '',\n      pass: '',\n      checkPass: ''\n    };\n    _this.loginShow = false;\n    _this.registerShow = false;\n\n    _this.validatePass = function (rule, value, callback) {\n      if (value === '') {\n        callback(new Error('请输入密码'));\n      } else {\n        if (_this.registerForm.checkPass !== '') {\n          _this.$refs.ruleForm.validateField('checkPass');\n        }\n\n        callback();\n      }\n    };\n\n    _this.validatePass2 = function (rule, value, callback) {\n      if (value === '') {\n        callback(new Error('请再次输入密码'));\n      } else if (value !== _this.registerForm.pass) {\n        callback(new Error('两次输入密码不一致!'));\n      } else {\n        callback();\n      }\n    };\n\n    _this.rules = {\n      email: [{\n        required: true,\n        message: '请输入邮箱地址',\n        trigger: 'blur'\n      }, {\n        type: 'email',\n        message: '请输入正确的邮箱地址',\n        trigger: ['blur', 'change']\n      }],\n      name: [{\n        required: true,\n        message: '请输入昵称',\n        trigger: 'blur'\n      }, {\n        min: 3,\n        max: 5,\n        message: '长度在 3 到 5 个字符',\n        trigger: 'blur'\n      }],\n      pass: [{\n        validator: _this.validatePass,\n        trigger: 'blur'\n      }],\n      checkPass: [{\n        validator: _this.validatePass2,\n        trigger: 'blur'\n      }]\n    };\n    return _this;\n  }\n\n  var _proto = LoginNav.prototype;\n\n  _proto.mounted = function mounted() {\n    var _this2 = this;\n\n    setTimeout(function () {\n      _this2.loginShow = true;\n    }, 500);\n  }\n  /**\n   *\n   */\n  ;\n\n  _proto.login = function login() {\n    var _this3 = this;\n\n    this.$api.login(this.userForm).then(function (req) {\n      var _req$data = req.data,\n          code = _req$data.code,\n          data = _req$data.data;\n\n      if (code === 0) {\n        _this3.$router.push({\n          path: '/'\n        });\n      } else {\n        _this3.$message.error(data.message);\n      }\n    }).catch(function (err) {\n      console.log(err);\n    });\n  };\n\n  _proto.goRegister = function goRegister() {\n    var _this4 = this;\n\n    this.loginShow = false;\n    setTimeout(function () {\n      _this4.registerShow = true;\n    }, 500);\n  };\n\n  _proto.register = function register(formName) {\n    var _this5 = this;\n\n    this.$refs[formName].validate(function (valid) {\n      if (valid) {\n        console.log(_this5.registerForm);\n\n        _this5.$api.register(_this5.registerForm).then(function (req) {\n          var _req$data2 = req.data,\n              code = _req$data2.code,\n              data = _req$data2.data;\n\n          if (code === 0) {\n            _this5.$message({\n              message: data.message,\n              type: 'success'\n            });\n\n            _this5.registerShow = false;\n            setTimeout(function () {\n              _this5.loginShow = true;\n            }, 500);\n          } else {\n            _this5.$message.error(data.message);\n          }\n        }).catch(function (err) {\n          console.log(err);\n        });\n      } else {\n        _this5.$message({\n          type: 'error',\n          message: '注册信息错误,请检查'\n        });\n      }\n    });\n  };\n\n  return LoginNav;\n}(Vue), _temp)) || _class);\nexport { LoginNav as default };",{"version":3,"sources":["login.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n\t<section class=\"login\">\n\t\t<!-- 登录 -->\n\t\t<transition\n\t\t\tmode=\"out-in\"\n\t\t\tname=\"custom-classes-transition\"\n\t\t\tenter-active-class=\"animated bounceInDown\"\n\t\t\tleave-active-class=\"animated flipOutY\"\n\t\t>\n\t\t\t<section v-show=\"loginShow\" class=\"model\">\n\t\t\t\t<el-card class=\"box-card\" shadow=\"hover\">\n\t\t\t\t\t<div slot=\"header\" class=\"clearfix\">\n\t\t\t\t\t\t<span>欢迎登录</span>\n\t\t\t\t\t\t<el-button style=\"float: right; padding: 3px 0\" type=\"text\" @click=\"goRegister\">没有账号</el-button>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div style=\"margin-top: 20px\">\n\t\t\t\t\t\t<el-form label-width=\"80px\" :model=\"userForm\">\n\t\t\t\t\t\t\t<el-form-item label=\"邮箱\">\n\t\t\t\t\t\t\t\t<el-input type=\"email\" v-model=\"userForm.email\" placeholder=\"请输入邮箱\"></el-input>\n\t\t\t\t\t\t\t</el-form-item>\n\t\t\t\t\t\t\t<el-form-item label=\"密码\">\n\t\t\t\t\t\t\t\t<el-input type=\"password\" v-model=\"userForm.password\" placeholder=\"请输入密码\" autocomplete=\"new-password\"></el-input>\n\t\t\t\t\t\t\t</el-form-item>\n\t\t\t\t\t\t\t<el-form-item>\n\t\t\t\t\t\t\t\t<el-button type=\"primary\" @click=\"login\">登录</el-button>\n\t\t\t\t\t\t\t</el-form-item>\n\t\t\t\t\t\t</el-form>\n\t\t\t\t\t</div>\n\t\t\t\t</el-card>\n\t\t\t</section>\n\t\t</transition>\n\t\t\n\t\t<!-- 注册 -->\n\t\t<transition\n\t\t\tmode=\"out-in\"\n\t\t\tname=\"custom-classes-transition\"\n\t\t\tenter-active-class=\"animated flipInY\"\n\t\t\tleave-active-class=\"animated zoomOutDown\"\n\t\t>\n\t\t\t<section v-show=\"registerShow\" class=\"model\">\n\t\t\t\t<el-card class=\"box-card\" shadow=\"hover\">\n\t\t\t\t\t<div slot=\"header\" class=\"clearfix\">\n\t\t\t\t\t\t<span>欢迎注册</span>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div style=\"margin-top: 20px\">\n\t\t\t\t\t\t<el-form label-width=\"80px\" status-icon :model=\"registerForm\" :rules=\"rules\" ref=\"ruleForm\">\n\t\t\t\t\t\t\t<el-form-item label=\"邮箱\" prop=\"email\">\n\t\t\t\t\t\t\t\t<el-input type=\"email\" v-model=\"registerForm.email\" placeholder=\"请输入邮箱\"></el-input>\n\t\t\t\t\t\t\t</el-form-item>\n\t\t\t\t\t\t\t<el-form-item label=\"昵称\" prop=\"name\">\n\t\t\t\t\t\t\t\t<el-input type=\"text\" v-model=\"registerForm.name\" placeholder=\"请输入昵称\"></el-input>\n\t\t\t\t\t\t\t</el-form-item>\n\t\t\t\t\t\t\t<el-form-item label=\"密码\" prop=\"pass\">\n\t\t\t\t\t\t\t\t<el-input type=\"password\" v-model=\"registerForm.pass\" placeholder=\"请输入密码\" autocomplete=\"new-password\"></el-input>\n\t\t\t\t\t\t\t</el-form-item>\n\t\t\t\t\t\t\t<el-form-item label=\"确认密码\" prop=\"checkPass\">\n\t\t\t\t\t\t\t\t<el-input type=\"password\" v-model=\"registerForm.checkPass\" placeholder=\"请再次输入密码\" autocomplete=\"new-password\"></el-input>\n\t\t\t\t\t\t\t</el-form-item>\n\t\t\t\t\t\t\t<el-form-item>\n\t\t\t\t\t\t\t\t<el-button type=\"primary\" @click=\"register('ruleForm')\">注册</el-button>\n\t\t\t\t\t\t\t</el-form-item>\n\t\t\t\t\t\t</el-form>\n\t\t\t\t\t</div>\n\t\t\t\t</el-card>\n\t\t\t</section>\n\t\t</transition>\n\t</section>\n</template>\n\n<script>\n    import {Vue, Component} from 'vue-property-decorator'\n\n\timport TopNav from './TopNav'\n\n    @Component({components: {TopNav}})\n    \n    export default class LoginNav extends Vue {\n        userForm = {\n            email: '',\n            password: ''\n        }\n        registerForm = {\n            email: '',\n            name: '',\n            pass: '',\n            checkPass: ''\n        }\n        loginShow = false\n        registerShow = false\n        \n        validatePass = (rule, value, callback) => {\n            if (value === '') {\n                callback(new Error('请输入密码'))\n            } else {\n                if (this.registerForm.checkPass !== '') {\n                    this.$refs.ruleForm.validateField('checkPass')\n                }\n                callback()\n            }\n        }\n        validatePass2 = (rule, value, callback) => {\n            if (value === '') {\n                callback(new Error('请再次输入密码'))\n            } else if (value !== this.registerForm.pass) {\n                callback(new Error('两次输入密码不一致!'))\n            } else {\n                callback()\n            }\n        }\n        rules = {\n            email: [\n                {required: true, message: '请输入邮箱地址', trigger: 'blur'},\n                {type: 'email', message: '请输入正确的邮箱地址', trigger: ['blur', 'change']}\n            ],\n            name: [\n                {required: true, message: '请输入昵称', trigger: 'blur'},\n                {min: 3, max: 5, message: '长度在 3 到 5 个字符', trigger: 'blur'}\n            ],\n            pass: [\n                {validator: this.validatePass, trigger: 'blur'}\n            ],\n            checkPass: [\n                {validator: this.validatePass2, trigger: 'blur'}\n            ],\n        }\n        \n        \n        mounted () {\n            setTimeout(() => {\n                this.loginShow = true\n            }, 500)\n        }\n\n\t\t/**\n\t\t *\n\t\t */\n\t\tlogin () {\n            this.$api.login(this.userForm).then(req => {\n                const {code, data} = req.data\n                if (code === 0) {\n                    this.$router.push({path: '/'})\n                } else {\n                    this.$message.error(data.message)\n                }\n            }).catch(err => {\n                console.log(err)\n            })\n        }\n        \n        goRegister () {\n            this.loginShow = false\n            setTimeout(() => {\n                this.registerShow = true\n            }, 500)\n        }\n        \n        register (formName) {\n            this.$refs[formName].validate((valid) => {\n                if (valid) {\n                    console.log(this.registerForm)\n                    this.$api.register(this.registerForm).then(req => {\n                        const {code, data} = req.data\n                        if (code === 0) {\n                            this.$message({\n                                message: data.message,\n                                type: 'success'\n                            })\n                            this.registerShow = false\n                            setTimeout(() => {\n                                this.loginShow = true\n                            }, 500)\n                        } else {\n                            this.$message.error(data.message)\n                        }\n                    }).catch(err => {\n                        console.log(err)\n                    })\n                } else {\n                    this.$message({\n\t\t                    type: 'error',\n\t\t                    message: '注册信息错误,请检查'\n                    })\n                }\n            })\n        }\n\n\t}\n</script>\n\n<style lang=\"less\">\n\t.login {\n\t\twidth: 100%;\n\t\theight: 850px;\n\t\tposition: relative;\n\t\t.model {\n\t\t\tposition: absolute;\n\t\t\ttop: 50%;\n\t\t\tleft: 50%;\n\t\t\theight: 30%;\n\t\t\twidth: 50%;\n\t\t\tmargin: -15% 0 0 -25%;\n\t\t}\n\t}\n</style>\n"],"sourceRoot":"src/views/other"}]}