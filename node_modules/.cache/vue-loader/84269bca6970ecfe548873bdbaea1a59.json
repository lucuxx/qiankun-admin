{"remainingRequest":"/Users/liuxiang/Desktop/lxx/lxx/blob-server/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/liuxiang/Desktop/lxx/lxx/blob-server/src/components/MarkDown/index.vue?vue&type=style&index=0&id=500e6d02&lang=less&scoped=true&","dependencies":[{"path":"/Users/liuxiang/Desktop/lxx/lxx/blob-server/src/components/MarkDown/index.vue","mtime":1563186511782},{"path":"/Users/liuxiang/Desktop/lxx/lxx/blob-server/node_modules/css-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/liuxiang/Desktop/lxx/lxx/blob-server/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/Users/liuxiang/Desktop/lxx/lxx/blob-server/node_modules/postcss-loader/src/index.js","mtime":499162500000},{"path":"/Users/liuxiang/Desktop/lxx/lxx/blob-server/node_modules/less-loader/dist/cjs.js","mtime":1562311715001},{"path":"/Users/liuxiang/Desktop/lxx/lxx/blob-server/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/liuxiang/Desktop/lxx/lxx/blob-server/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n@import './markdown.css';\n@md-bd-color: #ccc;\n@md-title-color: #EDF2FC;\n@md-bg-color: #E6EBF5;\n@btn-hover: #409eff;\n#markdowm {\n    width: 100%;\n    height: 500px;\n    text-align: left;\n    overflow: hidden;\n    border: 1px solid @md-bd-color;\n    position: relative;\n    .md-title {\n        width: 100%;\n        height: 60px;\n        background: @md-title-color;\n        position: absolute;\n        left:0;top:0;\n        li {\n            width: 100px;\n            height: 100%;\n            line-height: 60px;\n            text-align: center;\n            position: relative;\n            float: left;\n            cursor: pointer;\n            &:hover {\n                color: @btn-hover;\n            }\n            &:after {\n                content: '';\n                position: absolute;\n                left: 100%;top:50%;\n                transform: translateY(-50%);\n                width: 1px;\n                height: 20px;\n                background: #ccc;\n            }\n            .uploadFile {\n                position: absolute;\n                top: 0;\n                left: 0;\n                width: 100%;\n                height: 100%;\n                opacity: 0;\n                cursor: pointer;\n            }\n        }\n    }\n    textarea,\n    .render {\n        float: left;\n        width: 50%;\n        height: 100%;\n        vertical-align: top;\n        box-sizing: border-box;\n        padding: 0 20px;\n    }\n    textarea {\n        border: none;\n        border-right: 1px solid @md-bd-color;\n        resize: none;\n        outline: none;\n        background-color: #f6f6f6;\n        font-size: 14px;\n        font-family: 'Monaco', courier, monospace;\n        padding: 20px;\n        padding-top: 60px;\n    }\n    .render {\n        background-color: @md-bg-color;\n        overflow-y: scroll;\n        padding-top: 60px;\n    }\n\n    .mask {\n        position: fixed;\n        left: 0;top: 0;\n        width: 100%;\n        height: 100%;\n        background: rgba(0, 0, 0, .5);\n    }\n    .link-text {\n        width: 100%;\n        text-align: center;\n        position: absolute;\n        left: 50%;top: 50%;\n        transform: translate(-50%, -50%);\n        button {\n            display: inline-block;\n            line-height: 1;\n            white-space: nowrap;\n            cursor: pointer;\n            border: 1px solid #b3d8ff;\n            -webkit-appearance: none;\n            text-align: center;\n            box-sizing: border-box;\n            outline: none;\n            transition: .1s;\n            font-weight: 500;\n            -webkit-user-select: none;\n            padding: 12px 20px;\n            font-size: 14px;\n            border-radius: 4px;\n            color: #409eff;\n            transition: all .3s;\n            background: #ecf5ff;\n            &:hover{\n                background: #409eff;\n                border-color: #409eff;\n                color: #fff;\n            }\n        }\n        input {\n            width: 300px;\n            background-color: #fff;\n            background-image: none;\n            border-radius: 4px;\n            border: 1px solid #dcdfe6;\n            box-sizing: border-box;\n            color: #606266;\n            display: inline-block;\n            font-size: inherit;\n            height: 40px;\n            line-height: 1;\n            outline: none;\n            padding: 0 15px;\n            transition: border-color .2s cubic-bezier(.645,.045,.355,1);\n            &:focus{\n                outline: none;\n                border-color: #409eff;\n            }\n        }\n    }\n}\n",{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA8JA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/views/edit","sourcesContent":["<template>\n    <div id=\"markdowm\">\n        <div class=\"md-title\">\n            <ul class=\"cf\">\n                <li>\n                    <span>插入图片</span>\n                    <input type=\"file\" class=\"uploadFile\" @change=\"insertImg\">\n                </li>\n                <li @click=\"maskBol=true\">\n                    <span>插入链接</span>\n                </li>\n                <li @click=\"insertCode\">\n                    <span>代码块</span>\n                </li>\n                <li @click=\"setCursorPosition($refs.text, '***')\">\n                    <span>分割线</span>\n                </li>\n                <li @click=\"setCursorPosition($refs.text, '****', 2)\">\n                    <span>粗体</span>\n                </li>\n                <li @click=\"setCursorPosition($refs.text, '**', 1)\">\n                    <span>斜体</span>\n                </li>\n                <li @click=\"setCursorPosition($refs.text, '> ', 2)\">\n                    <span>引用</span>\n                </li>\n            </ul>\n        </div>\n        <textarea v-model=\"val\" @input=\"handleModelInput\" ref=\"text\" @keydown.tab=\"tabMarkdown\"></textarea>\n        <div class=\"render fmt\" v-html=\"renderHtml\"></div>\n\n        <div class=\"mask\" v-show=\"maskBol\">\n            <div class=\"link-text\">\n                <input type=\"text\" v-model=\"link\">\n                <button @click=\"insertLink\">确定</button>\n            </div>\n        </div>\n\n    </div>\n</template>\n\n<script>\n    import marked from 'marked'\n    import highlightJs from 'highlight.js'\n    export default {\n        props: ['value'],\n        data() {\n            return {\n                val: this.value,\n                link: '',\n                maskBol: false,\n                textarea: null\n            }\n        },\n        mounted () {\n            this.textarea = this.$refs.text\n        },\n        methods: {\n            tabMarkdown (e) { // tab键\n                e.preventDefault();\n                let indent = '    ';\n                let start = this.textarea.selectionStart;\n                let end = this.textarea.selectionEnd;\n                let selected = window.getSelection().toString();\n                selected = indent + selected.replace(/\\n/g, '\\n' + indent);\n                this.textarea.value = this.textarea.value.substring(0, start) + selected\n                    + this.textarea.value.substring(end);\n                this.textarea.setSelectionRange(start + indent.length, start\n                    + selected.length)\n            },\n            handleModelInput() {\n                this.$emit('input', this.val)\n            },\n            async insertImg(e) { // 插入图片\n                let formData = new FormData(),\n                    img = '';\n                formData.append('img', e.target.files[0]);\n                try {\n                    let data = await this.axios({\n                        method: 'post',\n                        url: 'http://localhost:3000/markdown_upload_img',\n                        data: formData\n                    })\n                    img = data.data.img\n                } catch (e) {\n                    console.log(e)\n                }\n\n                let val = `![图片描述](${img})`\n                this.setCursorPosition(this.$refs.text, val, 6)\n            },\n            insertLink () { //插入链接\n                this.maskBol = false\n                let val = `[链接描述](${this.link})`\n                this.setCursorPosition(this.$refs.text, val, 5)\n            },\n            insertCode () {\n                let val = `\n\\`\\`\\`\n\n\\`\\`\\``\n                this.setCursorPosition(this.$refs.text, val, val.length-8)\n            },\n            setCursorPosition (dom,val,posLen) { // 设置光标位置\n                var cursorPosition = 0;\n                if(dom.selectionStart){\n                    cursorPosition = dom.selectionStart;\n                }\n                this.insertAtCursor(dom,val);\n                dom.focus();\n                dom.setSelectionRange(dom.value.length,cursorPosition + (posLen || val.length));\n                this.val = dom.value\n            },\n            insertAtCursor(dom, val) { // 光标所在位置插入字符\n                if (document.selection){\n                    dom.focus();\n                    sel = document.selection.createRange();\n                    sel.text = val;\n                    sel.select();\n                }else if (dom.selectionStart || dom.selectionStart == '0'){\n                    let startPos = dom.selectionStart;\n                    let endPos = dom.selectionEnd;\n                    let restoreTop = dom.scrollTop;\n                    dom.value = dom.value.substring(0, startPos) + val + dom.value.substring(endPos, dom.value.length);\n                    if (restoreTop > 0){\n                        dom.scrollTop = restoreTop;\n                    }\n                    dom.focus();\n                    dom.selectionStart = startPos + val.length;\n                    dom.selectionEnd = startPos + val.length;\n                } else {\n                    dom.value += val;\n                    dom.focus();\n                }\n            }\n        },\n        computed: {\n            renderHtml() {\n                marked.setOptions({\n                    renderer: new marked.Renderer(),\n                    gfm: true, //允许 Git Hub标准的markdown.\n                    tables: true, //允许支持表格语法。该选项要求 gfm 为true。\n                    breaks: true, //允许回车换行。该选项要求 gfm 为true。\n                    pedantic: false, //尽可能地兼容 markdown.pl的晦涩部分。不纠正原始模型任何的不良行为和错误。\n                    sanitize: true, //对输出进行过滤（清理），将忽略任何已经输入的html代码（标签）\n                    smartLists: true, //使用比原生markdown更时髦的列表。 旧的列表将可能被作为pedantic的处理内容过滤掉.\n                    smartypants: false, //使用更为时髦的标点，比如在引用语法中加入破折号。\n                    highlight: function (code) {\n                        return highlightJs.highlightAuto(code).value;\n                    }\n                });\n                return marked(this.val)\n            }\n        }\n    }\n</script>\n\n<style lang=\"less\" scoped>\n    @import './markdown.css';\n    @md-bd-color: #ccc;\n    @md-title-color: #EDF2FC;\n    @md-bg-color: #E6EBF5;\n    @btn-hover: #409eff;\n    #markdowm {\n        width: 100%;\n        height: 500px;\n        text-align: left;\n        overflow: hidden;\n        border: 1px solid @md-bd-color;\n        position: relative;\n        .md-title {\n            width: 100%;\n            height: 60px;\n            background: @md-title-color;\n            position: absolute;\n            left:0;top:0;\n            li {\n                width: 100px;\n                height: 100%;\n                line-height: 60px;\n                text-align: center;\n                position: relative;\n                float: left;\n                cursor: pointer;\n                &:hover {\n                    color: @btn-hover;\n                }\n                &:after {\n                    content: '';\n                    position: absolute;\n                    left: 100%;top:50%;\n                    transform: translateY(-50%);\n                    width: 1px;\n                    height: 20px;\n                    background: #ccc;\n                }\n                .uploadFile {\n                    position: absolute;\n                    top: 0;\n                    left: 0;\n                    width: 100%;\n                    height: 100%;\n                    opacity: 0;\n                    cursor: pointer;\n                }\n            }\n        }\n        textarea,\n        .render {\n            float: left;\n            width: 50%;\n            height: 100%;\n            vertical-align: top;\n            box-sizing: border-box;\n            padding: 0 20px;\n        }\n        textarea {\n            border: none;\n            border-right: 1px solid @md-bd-color;\n            resize: none;\n            outline: none;\n            background-color: #f6f6f6;\n            font-size: 14px;\n            font-family: 'Monaco', courier, monospace;\n            padding: 20px;\n            padding-top: 60px;\n        }\n        .render {\n            background-color: @md-bg-color;\n            overflow-y: scroll;\n            padding-top: 60px;\n        }\n\n        .mask {\n            position: fixed;\n            left: 0;top: 0;\n            width: 100%;\n            height: 100%;\n            background: rgba(0, 0, 0, .5);\n        }\n        .link-text {\n            width: 100%;\n            text-align: center;\n            position: absolute;\n            left: 50%;top: 50%;\n            transform: translate(-50%, -50%);\n            button {\n                display: inline-block;\n                line-height: 1;\n                white-space: nowrap;\n                cursor: pointer;\n                border: 1px solid #b3d8ff;\n                -webkit-appearance: none;\n                text-align: center;\n                box-sizing: border-box;\n                outline: none;\n                transition: .1s;\n                font-weight: 500;\n                -webkit-user-select: none;\n                padding: 12px 20px;\n                font-size: 14px;\n                border-radius: 4px;\n                color: #409eff;\n                transition: all .3s;\n                background: #ecf5ff;\n                &:hover{\n                    background: #409eff;\n                    border-color: #409eff;\n                    color: #fff;\n                }\n            }\n            input {\n                width: 300px;\n                background-color: #fff;\n                background-image: none;\n                border-radius: 4px;\n                border: 1px solid #dcdfe6;\n                box-sizing: border-box;\n                color: #606266;\n                display: inline-block;\n                font-size: inherit;\n                height: 40px;\n                line-height: 1;\n                outline: none;\n                padding: 0 15px;\n                transition: border-color .2s cubic-bezier(.645,.045,.355,1);\n                &:focus{\n                    outline: none;\n                    border-color: #409eff;\n                }\n            }\n        }\n    }\n</style>\n"]}]}