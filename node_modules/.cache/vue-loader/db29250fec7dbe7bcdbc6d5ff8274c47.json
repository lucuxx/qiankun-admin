{"remainingRequest":"/Users/liuxiang/Desktop/lxx/lxx/blob-server/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/liuxiang/Desktop/lxx/lxx/blob-server/src/views/edit/AsideNav.vue?vue&type=style&index=0&lang=less&","dependencies":[{"path":"/Users/liuxiang/Desktop/lxx/lxx/blob-server/src/views/edit/AsideNav.vue","mtime":1565174085167},{"path":"/Users/liuxiang/Desktop/lxx/lxx/blob-server/node_modules/css-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/liuxiang/Desktop/lxx/lxx/blob-server/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/Users/liuxiang/Desktop/lxx/lxx/blob-server/node_modules/postcss-loader/src/index.js","mtime":499162500000},{"path":"/Users/liuxiang/Desktop/lxx/lxx/blob-server/node_modules/less-loader/dist/cjs.js","mtime":1562311715001},{"path":"/Users/liuxiang/Desktop/lxx/lxx/blob-server/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/liuxiang/Desktop/lxx/lxx/blob-server/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n@import '../../assets/css/common.less';\n",{"version":3,"sources":["AsideNav.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAgLA","file":"AsideNav.vue","sourceRoot":"src/views/edit","sourcesContent":["<template>\n    <section class=\"AsideNav\">\n        <ul class=\"article_content\">\n            <!--            <li class=\"article_list\" @click=\"addArticleClass\"><i class=\"el-icon-circle-plus\"></i><span-->\n            <!--                    style=\"display: inline-block;margin-left: 10px\">新建文章分类</span></li>-->\n            <el-collapse v-model=\"activeName\" accordion>\n                <el-collapse-item :name=\"index\" v-for=\"(item,index) in articleClass\" :key=\"index\">\n                    <template slot=\"title\">\n                        <div style=\"margin-left: 20px;font-size: 16px\">\n                            <i class=\"header-icon el-icon-info\"></i>\n                            <span style=\"display: inline-block;margin-left: 10px\">{{ item.label }}</span>\n                        </div>\n                    </template>\n                    <div style=\"padding: 0\">\n                        <li style=\"padding-left:40px;box-sizing: border-box;list-style: none;width: 100%;height: 50px;line-height: 50px;border-bottom: 1px solid #eeeeee;\">\n                            <el-button type=\"text\" style=\"font-size: 14px;display:inline-block;margin-right: 10px\"\n                                       @click=\"addArticle\">新建文章\n                            </el-button>\n                            <i class=\"el-icon-circle-plus\"></i>\n                        </li>\n                        <li style=\"padding-left:40px;box-sizing: border-box;list-style: none;width: 100%;height: 50px;line-height: 50px;border-bottom: 1px solid #eeeeee;\"\n                            @click=\"changeArticle(i,id)\" v-for=\"(i,id) in item.content\"\n                            :key=\"id\" :class=\"articleIndex === id ? 'choiceList' : ''\">\n                            <el-row style=\"height: 100%;\">\n                                <el-col class=\"over-flow\" :span=\"18\" style=\"height: 100%;\">\n                                    <el-tooltip class=\"item\" effect=\"dark\" :content=\"i.title\" placement=\"top\">\n                                        <span>{{ i.title }}</span>\n                                    </el-tooltip>\n                                </el-col>\n                                <el-col :span=\"6\" style=\"height: 100%;\">\n                                    <el-dropdown trigger=\"click\" style=\"float: right;margin-right: 10px\">\n                                        <span class=\"el-dropdown-link\">\n                                            <i v-show=\"articleIndex === id\" class=\"el-icon-s-tools\"></i>\n                                        </span>\n                                        <el-dropdown-menu slot=\"dropdown\">\n                                            <el-dropdown-item icon=\"el-icon-upload2\">置顶文章</el-dropdown-item>\n                                            <el-dropdown-item icon=\"el-icon-lock\">设为私密</el-dropdown-item>\n                                            <el-dropdown-item icon=\"el-icon-delete-solid\"\n                                                              @click.native=\"deleteArticle(i)\">删除文章\n                                            </el-dropdown-item>\n                                            <el-dropdown-item icon=\"el-icon-s-fold\">\n                                                <el-dropdown>\n                                        <span class=\"el-dropdown-link\">\n                                            <span>设置文章分类</span>\n                                        </span>\n                                                    <el-dropdown-menu slot=\"dropdown\">\n                                                        <el-dropdown-item v-for=\"(i,id) in articleClass\" :key=\"id\"\n                                                                          :icon=\"i.icon\"\n                                                                          @click.native=\"changeTabs(i,item)\">{{ i.label\n                                                            }}\n                                                        </el-dropdown-item>\n                                                    </el-dropdown-menu>\n                                                </el-dropdown>\n                                            </el-dropdown-item>\n                                        </el-dropdown-menu>\n                                    </el-dropdown>\n                                </el-col>\n                            </el-row>\n                        </li>\n                    </div>\n                </el-collapse-item>\n            </el-collapse>\n\n        </ul>\n    </section>\n</template>\n\n<script lang=\"ts\">\n    import {Vue, Component} from \"vue-property-decorator\";\n    import moment from \"moment\";\n    import marked from \"marked\";\n    import {Getter, Action} from \"vuex-class\";\n\n\n    @Component\n    export default class AsideNav extends Vue {\n        @Getter articleInfo: any;           // 所有文章信息\n        @Getter currentArticle: any;       // 当前选中文章\n        @Action getArticleInfo: any;        // 存储文章信息\n        @Action changeCurrentArticle: any;    // 存储当前文章\n        activeName: number = 0;\n        articleIndex:number = 0;\n\n\n        // mounted(){\n        //     console.log(this.articleClass);\n        // }\n\n        get articleClass() {\n            if(this.$lo.isEmpty(this.articleInfo))return [];\n            const classArr: Array<Types.ArticleClass> = [\n                {label: \"前端技术\", icon: \"\", content: []},\n                {label: \"生活情感\", icon: \"\", content: []},\n                {label: \"日常吐槽\", icon: \"\", content: []},\n                {label: \"语言艺术\", icon: \"\", content: []},\n            ];\n            this.$lo.each(this.articleInfo, (item: any) => {\n                const index = this.$lo.findIndex(classArr, (i: any) => i.label === item.tags);\n                classArr[index].content.push(item);\n            });\n            return classArr;\n        }\n\n        // 设置文章类型\n        // protected changeTabs(i: Types.ArticleClass, item: any) {\n        //     const params = {\n        //         _id: item._id,\n        //         tags: i.label,\n        //         on: false,\n        //     };\n        //     this.$api.updateArticle(params).then((req: any) => {\n        //         setTimeout(() => {\n        //             this.$message({\n        //                 type: req.data.code === 0 ? \"success\" : \"error\",\n        //                 message: \"设置分类成功\"\n        //             });\n        //             this.getArticleInfo(req.data.data);\n        //         }, 1000);\n        //     });\n        //\n        // }\n\n        // 删除文章\n        protected async deleteArticle(article: any) {\n            const {code, data} = (await this.$api.deleteArticle({_id: article._id})).data;\n            this.$message({\n                type: code === 0 ? \"success\" : \"error\",\n                message: data.message\n            });\n            if (code === 0) {\n                this.getArticleInfo(data.data);\n            }\n        }\n\n        // 添加文章\n        protected addArticle(): void {\n            marked.setOptions({\n                renderer: new marked.Renderer(),\n                gfm: true,\n                tables: true,\n                breaks: true,\n                pedantic: false,\n                sanitize: false,\n                smartLists: true,\n                smartypants: false\n            });\n            const params = {\n                title: moment().format(\"YYYY-MM-DD\") || \"\",\n                time: moment().format(\"YYYY-MM-DD\") || \"\",\n                tags: this.articleClass[this.activeName].label,\n                content: marked(`# ${moment().format(\"YYYY-MM-DD\")}`) || \"\", // 转换过后的html\n                contentMD: `# ${moment().format(\"YYYY-MM-DD\")}` || \"\" // markdown\n            };\n            this.$api.addArticle(params).then(async (req: Types.InterfaceData) => {\n                this.$message({\n                    type: req.data.code === 0 ? \"success\" : \"error\",\n                    message: req.data.data.message\n                });\n                if (req.data.code === 0) {\n                    this.getArticleInfo(req.data.data.data);\n                }\n            });\n\n        }\n\n        // 切换当前文章\n        protected changeArticle(item: any,id: number): void {\n            console.log(item);\n            console.log(id);\n            this.articleIndex = id;\n            this.changeCurrentArticle(item);\n        }\n    }\n</script>\n\n<style lang=\"less\">\n    @import '../../assets/css/common.less';\n</style>\n<style lang=\"less\" scoped>\n    .AsideNav {\n        .article_content {\n            padding-left: 0;\n            margin-top: 0;\n\n            .article_list {\n                padding-left: 20px;\n                box-sizing: border-box;\n                list-style: none;\n                width: 100%;\n                height: 50px;\n                line-height: 50px;\n                border-bottom: 1px solid #eeeeee;\n            }\n\n            .choiceList {\n                background-color: #999999;\n            }\n        }\n    }\n</style>\n"]}]}