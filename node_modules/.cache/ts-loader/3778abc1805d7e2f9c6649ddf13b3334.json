{"remainingRequest":"/Users/liuxiang/Desktop/lxx/lxx/blob-server/node_modules/babel-loader/lib/index.js!/Users/liuxiang/Desktop/lxx/lxx/blob-server/node_modules/ts-loader/index.js??ref--13-2!/Users/liuxiang/Desktop/lxx/lxx/blob-server/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/liuxiang/Desktop/lxx/lxx/blob-server/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/liuxiang/Desktop/lxx/lxx/blob-server/src/views/edit/index.vue?vue&type=script&lang=ts&","dependencies":[{"path":"/Users/liuxiang/Desktop/lxx/lxx/blob-server/src/views/edit/index.vue","mtime":1564739199530},{"path":"/Users/liuxiang/Desktop/lxx/lxx/blob-server/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/liuxiang/Desktop/lxx/lxx/blob-server/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/liuxiang/Desktop/lxx/lxx/blob-server/node_modules/ts-loader/index.js","mtime":499162500000},{"path":"/Users/liuxiang/Desktop/lxx/lxx/blob-server/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/liuxiang/Desktop/lxx/lxx/blob-server/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/es6.function.name\";\nimport \"core-js/modules/web.dom.iterable\";\nimport \"core-js/modules/es6.array.for-each\";\nimport \"regenerator-runtime/runtime\";\nimport _asyncToGenerator from \"/Users/liuxiang/Desktop/lxx/lxx/blob-server/node_modules/@babel/runtime-corejs2/helpers/esm/asyncToGenerator\";\nimport _createClass from \"/Users/liuxiang/Desktop/lxx/lxx/blob-server/node_modules/@babel/runtime-corejs2/helpers/esm/createClass\";\nimport _inheritsLoose from \"/Users/liuxiang/Desktop/lxx/lxx/blob-server/node_modules/@babel/runtime-corejs2/helpers/esm/inheritsLoose\";\nimport * as tslib_1 from \"tslib\";\nimport { Vue, Component } from \"vue-property-decorator\";\nimport { Getter, Action } from \"vuex-class\";\nimport \"highlight.js/styles/github.css\";\nimport hljs from \"highlight.js\";\nimport articleHeader from \"./articleHeader.vue\";\nimport moment from \"moment\";\nimport marked from \"marked\";\nimport jsCookie from \"js-cookie\";\n\nvar EditNav =\n/*#__PURE__*/\nfunction (_Vue) {\n  _inheritsLoose(EditNav, _Vue);\n\n  function EditNav() {\n    var _this;\n\n    _this = _Vue.apply(this, arguments) || this;\n    _this.theme = \"default\";\n    _this.loading = false;\n    _this.articleTitle = [];\n    _this.choiceIndex = 0;\n    _this.articleClass = [{\n      label: \"前端技术\",\n      icon: \"\"\n    }, {\n      label: \"生活情感\",\n      icon: \"\"\n    }, {\n      label: \"日常吐槽\",\n      icon: \"\"\n    }, {\n      label: \"语言艺术\",\n      icon: \"\"\n    }];\n    return _this;\n  }\n\n  var _proto = EditNav.prototype;\n\n  _proto.mounted =\n  /*#__PURE__*/\n  function () {\n    var _mounted = _asyncToGenerator(\n    /*#__PURE__*/\n    regeneratorRuntime.mark(function _callee() {\n      var _this2 = this;\n\n      var oldCookie, cookie, _data, code, data;\n\n      return regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              this.loading = true;\n\n              if (!jsCookie.get(\"email\")) {\n                _context.next = 10;\n                break;\n              }\n\n              oldCookie = jsCookie.get(\"email\") || \"\";\n              cookie = this.$util.DecodeCookie(oldCookie);\n              _context.next = 6;\n              return this.$api.getUserInfo({\n                cookie: cookie\n              });\n\n            case 6:\n              _data = _context.sent.data;\n              code = _data.code;\n              data = _data.data;\n\n              if (code === 0) {\n                this.setUserInfo(data);\n              }\n\n            case 10:\n              _context.next = 12;\n              return this.$api.getArticle().then(function (req) {\n                var data = req.data.data;\n\n                _this2.$lo.each(data, function (item) {\n                  var result = {\n                    title: item.title,\n                    _id: item._id\n                  };\n\n                  _this2.articleTitle.push(result);\n                });\n              });\n\n            case 12:\n              this.loading = false;\n\n            case 13:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee, this);\n    }));\n\n    function mounted() {\n      return _mounted.apply(this, arguments);\n    }\n\n    return mounted;\n  }();\n\n  _proto.addArticle = function addArticle() {\n    var _this3 = this;\n\n    this.$api.addArticle(this.params).then(function (req) {\n      _this3.$message({\n        type: req.data.code === 0 ? \"success\" : \"error\",\n        message: req.data.data.message\n      });\n    });\n  };\n\n  _proto.changeArticle = function changeArticle(index) {\n    this.choiceIndex = index;\n  };\n\n  _proto.uploadImage =\n  /*#__PURE__*/\n  function () {\n    var _uploadImage = _asyncToGenerator(\n    /*#__PURE__*/\n    regeneratorRuntime.mark(function _callee2(file) {\n      return regeneratorRuntime.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              _context2.next = 2;\n              return this.uploadRequest(file);\n\n            case 2:\n              return _context2.abrupt(\"return\", _context2.sent);\n\n            case 3:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2, this);\n    }));\n\n    function uploadImage(_x) {\n      return _uploadImage.apply(this, arguments);\n    }\n\n    return uploadImage;\n  }();\n\n  _proto.changeColor = function changeColor(color) {\n    console.log(color);\n    this.theme = color;\n  };\n\n  _proto.uploadRequest = function uploadRequest(file) {\n    var result = \"https://github.com/luosijie/Front-end-Blog/blob/master/img/logo_vmmarkdown_name.png?raw=true\";\n    return new Promise(function (resolve, reject) {\n      window.setTimeout(function () {\n        resolve(result);\n      }, 1000);\n    });\n  };\n\n  _proto.htmlChange = function htmlChange(html) {\n    console.log(\"html-content\", html);\n    this.$nextTick(function () {\n      var codes = document.querySelectorAll(\".markdown-body pre code\");\n      codes.forEach(function (elem) {\n        hljs.highlightBlock(elem);\n      }); // let html = document.querySelector('.markdown-body')\n    }); // get html string here\n  };\n\n  _createClass(EditNav, [{\n    key: \"params\",\n    get: function get() {\n      marked.setOptions({\n        renderer: new marked.Renderer(),\n        gfm: true,\n        tables: true,\n        breaks: true,\n        pedantic: false,\n        sanitize: false,\n        smartLists: true,\n        smartypants: false\n      });\n      return {\n        author: this.user.name || \"\",\n        title: moment().format(\"YYYY-MM-DD\") || \"\",\n        time: moment().format(\"YYYY-MM-DD\") || \"\",\n        tags: \"前端技术\" || \"\",\n        content: marked(\"# \" + moment().format(\"YYYY-MM-DD\")) || \"\",\n        contentMD: \"# \" + moment().format(\"YYYY-MM-DD\") || \"\" // markdown\n\n      };\n    }\n  }]);\n\n  return EditNav;\n}(Vue);\n\ntslib_1.__decorate([Getter], EditNav.prototype, \"user\", void 0);\n\ntslib_1.__decorate([Action], EditNav.prototype, \"setUserInfo\", void 0);\n\nEditNav = tslib_1.__decorate([Component({\n  components: {\n    articleHeader: articleHeader\n  }\n})], EditNav);\nexport default EditNav;",{"version":3,"sources":["/Users/liuxiang/Desktop/lxx/lxx/blob-server/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/liuxiang/Desktop/lxx/lxx/blob-server/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/liuxiang/Desktop/lxx/lxx/blob-server/src/views/edit/index.vue?vue&type=script&lang=ts&"],"names":[],"mappings":"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","sourcesContent":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport {Vue, Component} from \"vue-property-decorator\";\nimport {Getter, Action} from \"vuex-class\";\nimport \"highlight.js/styles/github.css\";\nimport hljs from \"highlight.js\";\nimport articleHeader from \"./articleHeader.vue\";\nimport moment from \"moment\";\nimport marked from \"marked\";\nimport jsCookie from \"js-cookie\";\n\n@Component({components: {articleHeader}})\nexport default class EditNav extends Vue {\n    @Getter user: any;\n    @Action setUserInfo: any;\n\n    theme: string = \"default\";\n    loading:boolean = false;\n    private $api: any;\n\n    articleTitle: Array<Types.ArticleTitle> = [];\n    choiceIndex: number = 0;\n\n    articleClass: Array<Types.ArticleClass> = [\n        {label: \"前端技术\", icon: \"\"},\n        {label: \"生活情感\", icon: \"\"},\n        {label: \"日常吐槽\", icon: \"\"},\n        {label: \"语言艺术\", icon: \"\"},\n    ];\n\n    async mounted() {\n        this.loading = true;\n        if (jsCookie.get(\"email\")) {\n            const oldCookie: string = jsCookie.get(\"email\") || \"\";\n            const cookie: string = this.$util.DecodeCookie(oldCookie);\n            const {code, data} = (await this.$api.getUserInfo({cookie})).data;\n            if (code === 0) {\n                this.setUserInfo(data);\n            }\n        }\n        await this.$api.getArticle().then((req: any) => {\n            const data = req.data.data;\n            this.$lo.each(data,(item:Types.ArticleTitle) => {\n                const result = {title: item.title,_id:item._id};\n                this.articleTitle.push(result)\n            })\n        });\n        this.loading = false\n    }\n\n    get params(): Types.AddArticle {\n        marked.setOptions({\n            renderer: new marked.Renderer(),\n            gfm: true,\n            tables: true,\n            breaks: true,\n            pedantic: false,\n            sanitize: false,\n            smartLists: true,\n            smartypants: false\n        });\n        return {\n            author: this.user.name || \"\",\n            title: moment().format(\"YYYY-MM-DD\") || \"\",\n            time: moment().format(\"YYYY-MM-DD\") || \"\",\n            tags: \"前端技术\" || \"\",\n            content: marked(`# ${moment().format(\"YYYY-MM-DD\")}`) || \"\", // 转换过后的html\n            contentMD: `# ${moment().format(\"YYYY-MM-DD\")}` || \"\" // markdown\n        };\n    }\n\n\n    addArticle() {\n        this.$api.addArticle(this.params).then((req: Types.InterfaceData) => {\n            this.$message({\n                type: req.data.code === 0 ? \"success\" : \"error\",\n                message: req.data.data.message\n            });\n        });\n\n    }\n\n    changeArticle(index: number): void {\n        this.choiceIndex = index;\n    }\n\n    async uploadImage(file: any) {\n        return await this.uploadRequest(file);\n    }\n\n    changeColor(color: string) {\n        console.log(color);\n        this.theme = color;\n    }\n\n    uploadRequest(file: any) {\n        const result = \"https://github.com/luosijie/Front-end-Blog/blob/master/img/logo_vmmarkdown_name.png?raw=true\";\n        return new Promise((resolve, reject) => {\n            window.setTimeout(() => {\n                resolve(result);\n            }, 1000);\n        });\n    }\n\n    htmlChange(html: string) {\n        console.log(\"html-content\", html);\n        this.$nextTick(() => {\n            const codes = document.querySelectorAll(\".markdown-body pre code\");\n            codes.forEach(elem => {\n                hljs.highlightBlock(elem);\n            });\n            // let html = document.querySelector('.markdown-body')\n        });\n        // get html string here\n    }\n\n}\n"],"sourceRoot":""}]}